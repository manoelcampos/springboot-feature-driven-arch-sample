:sectnums:

= E-Commerce REST API (Backend)

Java 23 backend with Spring Boot 3, providing a REST API.

== Set up the Development Environment

=== Enable Spring DevTools to restart the server when the project changes

In IntelliJ settings, enable:

* Build, Execution, Deployment &gt; Compiler &gt; Build project automatically
* Advanced Settings &gt; Allow auto-make to start even if developed application is currently running

=== Project Settings

The file link:.env.example[.env.example] must be duplicated as ".env".
This file is not committed to version control and should include the settings appropriate for your development environment.

== Running the project in the dev environment

You can run the `SampleApiApplication` class in your IDE or type `mvn spring-boot:run` in a terminal. After it starts, just visit http://localhost:8080

== Automated code generation and tooling

This project automates several repetitive tasks in the build, such as generating DTOs, converting Java models/DTOs to TypeScript, providing automatic accessors for Java classes, and copying JavaDocs to the generated TypeScript. Everything runs from the Maven build, so you usually just need to execute `./mvnw clean compile`.

=== DTOGen: automatic DTO record generation

https://github.com/manoelcampos/dtogen[DTOGen] is configured as a Java annotation processor to generate immutable DTO `record`s from your model entities.

- *How it works*:
** Add `@DTO` to a model/entity class and DTOGen generates a Java `record` in the same package with the fields/selectors you define via annotations.
** Runs automatically during compilation through the `maven-compiler-plugin` annotation processing step.
- *Where code is generated*: `target/generated-sources/annotations/` (standard location for annotation processors)
- *Why it helps*: Eliminates boilerplate DTO classes and keeps them synchronized with your domain model.

=== Auto Class Accessors Maven Plugin: automatic accessor bridging

https://github.com/manoelcampos/auto-class-accessors-maven-plugin[auto-class-accessors-maven-plugin] uses bytecode manipulation to route direct field reads/writes to existing getter/setter methods at build time (changing generated bytecode).

- *What it does*:
** If a class has fields and corresponding getters/setters, the plugin rewrites bytecode so any direct field access is transformed into calls to the accessor methods.
** This allows you to keep concise code while still applying encapsulation and validation in getters/setters.
- *When it runs*: Executed as part of the Maven build, so no extra steps are required beyond `./mvnw clean compile`.

=== TypeScript generator: Java to TypeScript models

The project uses https://github.com/vojtechhabarta/typescript-generator[typescript-generator] to generate TypeScript interfaces from Java model classes and DTO records.

- *What it generates*: A TypeScript module containing interfaces/types for both entities and DTO `record`s, consumed by the frontend.
- *Where files are generated*: `/frontend/app/model/models.generated.ts`
- *How it gets enriched with JavaDocs*: The generator is configured to read `./target/javadoc.xml` and copy JavaDoc comments to the generated TypeScript files.
- *When it runs*: Bound to the `compile` phase. Run `./mvnw clean compile` to refresh the generated TS models.

=== XML Doclet: exporting JavaDocs to XML

To copy JavaDoc into the generated TypeScript, the build first produces an XML representation of JavaDocs using https://github.com/manticore-projects/xml-doclet[xml-doclet] via the standard Maven Javadoc plugin.

- *What it does*: Generates `target/javadoc.xml` containing JavaDoc for project classes.
- *When it runs*: During the `compile` phase before the TypeScript generation, ensuring the XML file is available.

=== Typical development workflow

1. Edit your Java entities and/or DTO annotations.
2. Run `./mvnw clean compile`.
   - DTOGen regenerates DTO `record`s under `target/generated-sources/annotations`.
   - Maven Javadoc plugin + XML Doclet generates `target/javadoc.xml`.
   - TypeScript Generator produces/updates `/frontend/app/model/models.generated.ts` and copies JavaDoc comments.
   - Auto Class Accessors plugin applies accessor bridging in compiled classes.
3. Commit changes in your Java sources and the generated TypeScript file (the `target` directory stays untracked as usual).
